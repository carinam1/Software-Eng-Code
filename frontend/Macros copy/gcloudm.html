<!DOCTYPE html>
<html>
<head>
    <title>Food API Example</title>
    <link rel="stylesheet" href="gstyles.css">
</head>
<body> 
    <div class="container">
    <label for="input-box">Enter text:</label>
    <input type="text" id="input-box">
    <button onclick="submitText()">Search</button>
    <br>
    <br>

    <select id="data-select" class="custom-select"></select>
    <div id="data-container">

    </div>
    <button id="add-to-log">Add to Log</button>
    
    <p id="daily-calories">Total Daily Calories: 0</p>
    <p id="daily-protein">Total Daily Protein: 0 g</p>
    <p id="daily-fat">Total Daily Fat: 0 g</p>
    <p id="daily-carbohydrates">Total Daily Carbohydrates: 0 g</p>
    
    <table id="log-table">
        <thead>
            <tr>
                <th>Food Name</th>
                <th>Calories</th>
                <th>Protein</th>
                <th>Fats</th>
                <th>Carbs</th>
                <th class="remove-header"></th>
            </tr>
        </thead>
        <tbody id="log-table-body">
        </tbody>
    </table>
    

    <script src="gscript.js">
    </script>
    <script>
        let dailyMacros = {
            calories: 0,
            protein: 0,
            fat: 0,
            carbohydrates: 0
        };

        document.getElementById("add-to-log").addEventListener("click", () => {
            // Update daily macros
            dailyMacros.calories += parseFloat(calories.split(" ")[0]);
            dailyMacros.protein += parseFloat(protein.split(" ")[0]);
            dailyMacros.fat += parseFloat(fat.split(" ")[0]);
            dailyMacros.carbohydrates += parseFloat(carbohydrate.split(" ")[0]);

            // Update daily calories display
            document.getElementById("daily-calories").innerHTML = `Total Daily Calories: ${dailyMacros.calories.toFixed(2)}`;
            document.getElementById("daily-protein").innerHTML = `Total Daily Protein: ${dailyMacros.protein.toFixed(2)} g`;
            document.getElementById("daily-fat").innerHTML = `Total Daily Fat: ${dailyMacros.fat.toFixed(2)} g`;
            document.getElementById("daily-carbohydrates").innerHTML = `Total Daily Carbohydrates: ${dailyMacros.carbohydrates.toFixed(2)} g`;

            // Add to log table
            addToLogTable(food.description, calories, protein, fat, carbohydrate);

            // Display daily macros
            console.log("Daily Macros:", dailyMacros);
        });
            // Event listener for the 'Add to Log' button
            document.getElementById("add-to-log").addEventListener("click", () => {
            const foodName = food.description;
            const caloriesValue = parseFloat(calories.split(" ")[0]);
            const proteinValue = parseFloat(protein.split(" ")[0]);
            const fatValue = parseFloat(fat.split(" ")[0]);
            const carbsValue = parseFloat(carbohydrate.split(" ")[0]);

            sendFoodToDatabase(foodName, caloriesValue, proteinValue, fatValue, carbsValue);
        });
    </script>
    </div>
</body>
</html>
